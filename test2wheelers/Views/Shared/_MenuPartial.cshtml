@model List<test2wheelers.Models.MenuItem>
@{
    var currentAction = ViewContext.RouteData.Values["action"]?.ToString();
    var currentController = ViewContext.RouteData.Values["controller"]?.ToString();
}

<li class="nav-item @(currentAction == "Dashboard" ? "menu-open" : "")">
    <a class="nav-link @(currentAction == "Dashboard" ? "active" : "")"
       asp-controller="Admin" asp-action="Dashboard">
        <i class="nav-icon fas fa-tachometer-alt"></i>
        <p>Dashboard</p>
    </a>
</li>

@foreach (var menu in Model)
{
    if (!menu.CanView) continue; // skip non-viewable

    if (menu.Children != null && menu.Children.Count > 0)
    {
        <li class="nav-item">
            <a href="#" class="nav-link " id="menu_@menu.MenuId">
                <i class="nav-icon @(menu.Icon)"></i>
                <p>@menu.MenuName<i class="right fas fa-angle-left"></i></p>
            </a>
            <ul class="nav nav-treeview" aria-labelledby="menu_@menu.MenuId">
                @Html.Partial("_MenuPartial", menu.Children)
            </ul>
        </li>
    }
    else
    {
        <li class="nav-item @(currentAction == "Brands" || currentAction == "Models" ? "menu-open" : "")">
            <a class="nav-link @(currentAction == "Brands" || currentAction == "Models" ? "active" : "")" href="@menu.Url">
                <i class="nav-icon @(menu.Icon)"></i>
                <p>@menu.MenuName</p>
            </a>
        </li>
    }
}
